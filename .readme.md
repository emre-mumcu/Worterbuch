dotnet add package Microsoft.AspNetCore.Mvc.Razor.RuntimeCompilation
dotnet add package HtmlAgilityPack
dotnet tool install --global dotnet-ef
dotnet tool update --global dotnet-ef
dotnet add package Microsoft.EntityFrameworkCore.Sqlite
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Microsoft.EntityFrameworkCore.Tools

dotnet add package AutoMapper

dotnet ef migrations add Mig0 -o App_Data\Migrations
dotnet ef database update
dotnet ef database drop
dotnet ef migrations remove
dotnet ef migrations script -o script.sql
dotnet ef migrations script Mig0 Mig1 -o script.sql
[-c ProjectHavingDbContext] [-s StartupProject]



			migrationBuilder.Sql("INSERT INTO Words (Word,Type,Pronunciation,Plural,Gender,VerbConjugation,English,Turkish,Sample,Detail) SELECT Word,Type,Pronunciation,Plural,Gender,VerbConjugation,English,Turkish,Sample,Detail FROM Words_Temp");

			migrationBuilder.DropTable(name: "Words_Temp");

					// using Microsoft.EntityFrameworkCore;
		// appDbContext.Database.ExecuteSqlRaw("INSERT INTO Words (Word,Type,Pronunciation,Plural,Gender,VerbConjugation,English,Turkish,Sample,Detail) SELECT Word,Type,Pronunciation,Plural,Gender,VerbConjugation,English,Turkish,Sample,Detail FROM Words_Temp");
		//appDbContext.Database.ExecuteSqlRaw("DROP TABLE IF EXISTS Words_Temp");




using System.Globalization;
using System.Net;
using System.Text;
using HtmlAgilityPack;
using Microsoft.AspNetCore.Mvc;

namespace Wörterbuch.Controllers
{
	public class WortController : Controller
	{
		// [Bind(Prefix = "id")]
		[HttpGet("[controller]/[action]/{id}")]
		public async Task<ActionResult> Noun([FromRoute(Name = "id")] string wort)
		{
			wort = wort.ToLower();

			Verbformen verbformen = new Verbformen(wort);

			try
			{
				verbformen = await WortErhalten(wort);
			}
			catch (System.Exception)
			{

			}


			return View(model: verbformen);
		}

		[HttpPost]
		public IActionResult SaveNoun(Verbformen vf)
		{
			return View();
		}

		private async Task<Verbformen> WortErhalten(string wort)
		{
			Verbformen vf = new Verbformen(wort);

			try
			{
				// HtmlDocument htmlDocument = new HtmlWeb().Load(vf.URL);

				HtmlDocument htmlDocument = new HtmlDocument();

				using (HttpClient client = new HttpClient())
				{
					client.DefaultRequestHeaders.Add("User-Agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36");
					string content = await client.GetStringAsync(vf.URL);
					htmlDocument.LoadHtml(content);
				}

				var vStckKrz = htmlDocument.GetElementbyId("vStckKrz");

				var vGrnd = vStckKrz.SelectSingleNode(".//*[contains(@class, 'vGrnd')]");

				vf.Gefunden = vGrnd.InnerText;

				var r1Zeile = vStckKrz.SelectSingleNode(".//*[contains(@class, 'r1Zeile')]");

				vf.Bedeutung = NormalizeString(r1Zeile.InnerText);

				return vf;
			}
			catch (System.Exception)
			{

				throw;
			}
		}

		private string NormalizeString(string input)
		{
			input = WebUtility.HtmlDecode(input);
			return new string(input
				.Normalize(NormalizationForm.FormD) // Decomposes diacritics
				.Where(c => CharUnicodeInfo.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark) // Removes diacritics
				.Where(c => !char.IsControl(c)) // Removes control characters
				.ToArray());
		}
	}

	public class Verbformen(string wort)
	{
		public string URL { get; } = $"https://www.verbformen.com/?w={wort}";
		public string Wort { get; } = wort;
		public string? Gefunden { get; set; }
		public string? Bedeutung { get; set; }
	}
}



using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;

namespace Wörterbuch;

public class Noun
{
	public string Wort { get; set; } = null!;
	public string Gender { get; set; } = null!;
	public string Plural { get; set; } = null!;
	public string? English { get; set; }
	public string? Turkish { get; set; }
	public string? Sample { get; set; }
}

public class NounConfiguration : IEntityTypeConfiguration<Noun>
{
	public void Configure(EntityTypeBuilder<Noun> builder)
	{
		builder.HasKey(b => b.Wort); // Composite Key: .HasKey(e => new { e.Key1, e.Key2 });
		builder.Property(b => b.Wort).IsRequired();
		builder.HasIndex(b => b.Wort).IsUnique(true);
	}
}
